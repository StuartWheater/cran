<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Ensures factors have same classes across studies</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../assets/R.css">
</head><body>

<table width="100%" summary="page for ds.createfactor {dsbaseclient}"><tr><td>ds.createfactor {dsbaseclient}</td><td align="right">R Documentation</td></tr></table>

<h2>Ensures factors have same classes across studies</h2>

<h3>Usage</h3>

<pre>
ds.createfactor(datasources = NULL, xvect = NULL, newvarname = NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>datasources</code></td>
<td>
<p>a list of opal object(s) obtained
after login in to opal servers; these objects hold also
the data assign to R, as <code>dataframe</code>, from opal
datasources.</p>
</td></tr>
<tr valign="top"><td><code>xvect</code></td>
<td>
<p>a factor variable.</p>
</td></tr>
<tr valign="top"><td><code>newvarname</code></td>
<td>
<p>name of the variable to assigned the
created factor to.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks if a factor variable has the same
length accross the collaborating studies; if not it adds
the missing level(s) to make up for the missing class(es).
This is necessary for certain function like <code>ds.glm</code>
which require the same classes across the studies to
combine.
</p>


<h3>Value</h3>

<p>a list of <code>factor</code> vectors or one factor vector.
</p>


<h3>Author(s)</h3>

<p>Gaye, A.
</p>


<h3>Examples</h3>

<pre>
{

# create a login table for the test data that has the features we want to test
server &lt;- c("study1", "study2", "study3")
url &lt;- c("http://54.242.140.255","http://54.242.46.59", "http://23.22.215.42")
user &lt;- c("administrator", "administrator", "administrator")
password &lt;- c("password", "password", "password")
table &lt;- c("Test.CNSIM", "Test.CNSIM", "Test.CNSIM")
logindata &lt;- data.frame(server,url,user,password,table)
# login and assign specific variable(s)
myvar &lt;- list("PM_BMI_CATEGORICAL")
opals &lt;- datashield.login(logins=logindata,assign=TRUE,variables=myvar)
# check the number of levels for the variable PM_BMI_CATEGORICAL in each study
# levels of PM_BMI_CATEGORICAL in the 3 studies
datashield.aggregate(opals[1], quote(levels(D$PM_BMI_CATEGORICAL)))
datashield.aggregate(opals[2], quote(levels(D$PM_BMI_CATEGORICAL)))
datashield.aggregate(opals[3], quote(levels(D$PM_BMI_CATEGORICAL)))

#create a factor vector of the variable 'PM_BMI_CATEGORICAL', one for each study
ds.createfactor(opals, xvect=quote(D$PM_BMI_CATEGORICAL))

# the name of the newly created variable is the previous one with the suffixe '_f'
datashield.aggregate(opals[1], quote(levels(PM_BMI_CATEGORICAL_f)))
datashield.aggregate(opals[2], quote(levels(PM_BMI_CATEGORICAL_f)))
datashield.aggregate(opals[3], quote(levels(PM_BMI_CATEGORICAL_f)))
}
</pre>

<hr><div align="center">[Package <em>dsbaseclient</em> version 2.4.1 ]</div>
</body></html>
